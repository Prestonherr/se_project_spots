!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},r=(e,t,r)=>{const n=t.id+"-error";e.querySelector("#"+n).textContent="",t.classList.remove(r.inputErrorClass)},n=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,r):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)};function a(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Save",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Saving...";e.textContent=t?n:r}var s=e+"d73f076c46eb5467f5fc.svg",c=e+"d3610e9c6dce3cb370d8.svg",l=e+"2fc47fd8e9a9bcd9612f.jpg",i=e+"d38272e02bb4f1ab1c37.svg",d=e+"40608da7369d39bc1077.svg";const u=document.getElementById("avatar");u.src=l,document.getElementById("logo").src=c,document.getElementById("pencil-icon").src=i,document.getElementById("plus-icon").src=d,document.getElementById("profile__pencil-light").src=s;const m=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}getAppInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}_request(e,t){return fetch(e,t).then(this._checkResponse)}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}editUserInfo(e){let{name:t,about:r}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})})}editAvatarInfo(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}postNewCard(e){let{name:t,link:r}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}changeLikeStatus(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"0f6138b5-8fc9-4c68-90b7-4fd691cce345","Content-Type":"application/json"}});m.getAppInfo().then((e=>{let[t,r]=e;u.src=t.avatar,b.textContent=t.name,p.textContent=t.about,r.forEach((e=>{const t=K(e);M.append(t)}))})).catch(console.error);const _=document.querySelector("#preview-modal"),v=_.querySelector(".modal__image"),h=_.querySelector(".modal__caption"),S=_.querySelector(".modal__close-button"),y=document.querySelector(".profile__edit-button"),f=document.querySelector(".profile__add-button"),b=document.querySelector(".profile__name"),p=document.querySelector(".profile__description"),q=document.querySelector(".profile__avatar-btn"),E=document.querySelector("#edit-profile-modal"),g=E.querySelector(".modal__form"),k=E.querySelector(".modal__close-button"),L=E.querySelector("#profile-name-input"),C=E.querySelector("#profile-description-input"),I=E.querySelector(".modal__submit-button"),U=document.querySelector("#avatar-modal"),x=U.querySelector(".modal__form"),A=U.querySelector(".modal__submit-button"),B=U.querySelector(".modal__close-button"),D=U.querySelector("#profile-avatar-input"),$=document.querySelector("#delete-modal"),w=$.querySelector(".modal__form"),T=$.querySelector(".modal__close-button"),N=document.getElementById("delete-cancel-btn"),P=document.querySelector("#add-card-modal"),j=P.querySelector(".modal__close-button"),O=P.querySelector(".modal__form"),J=P.querySelector(".modal__submit-button"),H=P.querySelector("#add-card-name-input"),R=P.querySelector("#add-card-link-input"),z=document.querySelector("#card-template"),M=document.querySelector(".cards__list");let F,G;function K(e){const t=z.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),n=t.querySelector(".card__image"),o=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return r.textContent=e.name,n.src=e.link,n.alt=e.name,n.addEventListener("click",(()=>{Q(_),v.src=e.link,v.alt=e.name,h.textContent=e.name})),e.isLiked?o.classList.add("card__like-button_liked"):o.classList.remove("card__like-button_liked"),o.addEventListener("click",(()=>{const t=o.classList.contains("card__like-button_liked");m.changeLikeStatus(e._id,t).then((e=>{e.isLiked?o.classList.add("card__like-button_liked"):o.classList.remove("card__like-button_liked")})).catch(console.error)})),a.addEventListener("click",(()=>{F=t,G=e._id,Q($)})),t}function Q(e){e.classList.add("modal_opened"),document.addEventListener("keydown",X)}function V(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",X)}function W(e){e.target.classList.contains("modal_opened")&&V(e.target)}function X(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&V(e)}}var Y;w.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;a(t,!0,"Delete","Deleting..."),m.deleteCard(G).then((()=>{F.remove(),V($)})).catch(console.error).finally((()=>{a(t,!1,"Delete","Deleting...")}))})),y.addEventListener("click",(()=>{var e,n;C.value=p.textContent,L.value=b.textContent,e=g,n=t,[C,L].forEach((t=>{r(e,t,n)})),Q(E)})),k.addEventListener("click",(()=>{V(E)})),f.addEventListener("click",(()=>{Q(P)})),j.addEventListener("click",(()=>{V(P)})),S.addEventListener("click",(()=>{V(_)})),q.addEventListener("click",(()=>{Q(U)})),x.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;a(r,!0,"Save","Saving..."),m.editAvatarInfo(D.value).then((e=>{u.src=e.avatar,V(U),x.reset(),o(A,t)})).catch(console.error).finally((()=>{a(r,!1,"Save","Saving...")}))})),B.addEventListener("click",(()=>{V(U)})),T.addEventListener("click",(()=>{V($)})),N.addEventListener("click",(()=>{V($)})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("mousedown",W)})),g.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;a(r,!0,"Save","Saving..."),m.editUserInfo({name:L.value,about:C.value}).then((e=>{b.textContent=e.name,p.textContent=e.about,V(E),o(I,t)})).catch(console.error).finally((()=>{a(r,!1,"Save","Saving...")}))})),O.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;a(r,!0,"Save","Saving...");const n={name:H.value,link:R.value};m.postNewCard(n).then((e=>{const r=K(e);M.prepend(r),V(P),O.reset(),o(J,t)})).catch(console.error).finally((()=>{a(r,!1,"Save","Saving...")}))})),Y=t,Array.from(document.querySelectorAll(Y.formSelector)).forEach((e=>{((e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);n(o,a,t),o.forEach((s=>{s.addEventListener("input",(function(){((e,t,n)=>{t.validity.valid?r(e,t,n):((e,t,r,n)=>{const o=t.id+"-error";e.querySelector("#"+o).textContent=r,t.classList.add(n.inputErrorClass)})(e,t,t.validationMessage,n)})(e,s,t),n(o,a,t)}))}))})(e,Y)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVMsSUFFMUNnRyxNQUFNQyxRQUFRQyxPQUNkeUQsU0FBUSxLQUNQL0gsRUFBYzZILEdBQVcsRUFBTyxPQUFRLFlBQVksR0FFMUQsSUZsS2lDL0ksRUUwUGhCVixFRnpQRW1LLE1BQU1DLEtBQUsvSCxTQUFTMEgsaUJBQWlCckosRUFBT1QsZUFDcER5RixTQUFTbEYsSUFoQk02SixFQUFDN0osRUFBUUUsS0FDakMsTUFBTVEsRUFBWWlKLE1BQU1DLEtBQUs1SixFQUFPdUosaUJBQWlCckosRUFBT1IsZ0JBQ3REb0ssRUFBZ0I5SixFQUFPSyxjQUFjSCxFQUFPUCxzQkFFbERjLEVBQWtCQyxFQUFXb0osRUFBZTVKLEdBRTVDUSxFQUFVd0UsU0FBUzZFLElBQ2pCQSxFQUFhN0IsaUJBQWlCLFNBQVMsV0F6Q2hCOEIsRUFBQ2hLLEVBQVFDLEVBQVNDLEtBQ3RDRCxFQUFRYSxTQUFTQyxNQUdwQmhCLEVBQWVDLEVBQVFDLEVBQVNDLEdBbEJiK0osRUFBQ2pLLEVBQVFDLEVBQVNpSyxFQUFVaEssS0FDakQsTUFBTUMsRUFBYUYsRUFBUUcsR0FBSyxTQUNiSixFQUFPSyxjQUFjLElBQU1GLEdBQ25DRyxZQUFjNEosRUFDekJqSyxFQUFRTSxVQUFVWSxJQUFJakIsRUFBT0wsZ0JBQWdCLEVBWTNDb0ssQ0FBZWpLLEVBQVFDLEVBQVNBLEVBQVFrSyxrQkFBbUJqSyxFQUc3RCxFQXFDSThKLENBQW1CaEssRUFBUStKLEVBQWM3SixHQUN6Q08sRUFBa0JDLEVBQVdvSixFQUFlNUosRUFDOUMsR0FBRSxHQUNGLEVBTUEySixDQUFrQjdKLEVBQVFFLEVBQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBlcnJvck1zZywgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnSUQgPSBpbnB1dEVsLmlkICsgXCItZXJyb3JcIjtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgZXJyb3JNc2dJRCk7XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBlcnJvck1zZztcbiAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dJRCA9IGlucHV0RWwuaWQgKyBcIi1lcnJvclwiO1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBlcnJvck1zZ0lEKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0LCBjb25maWcpO1xuICB9KTtcbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWwpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWwsIGNvbmZpZyk7XG4gIH0pO1xufTtcbiIsImV4cG9ydCBmdW5jdGlvbiBzZXRCdXR0b25UZXh0KFxuICBidG4sXG4gIGlzTG9hZGluZyxcbiAgZGVmYXVsdFRleHQgPSBcIlNhdmVcIixcbiAgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiXG4pIHtcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIGJ0bi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICB9IGVsc2Uge1xuICAgIGJ0bi50ZXh0Q29udGVudCA9IGRlZmF1bHRUZXh0O1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgc2V0dGluZ3MsXG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5pbXBvcnQgeyBzZXRCdXR0b25UZXh0IH0gZnJvbSBcIi4uL3V0aWxzL2hlbHBlcnMuanNcIjtcblxuaW1wb3J0IHBlbmNpbExpZ2h0SWNvbiBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC1saWdodC5zdmdcIjtcbmltcG9ydCBsb2dvU3JjIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcbmltcG9ydCBhdmF0YXJTcmMgZnJvbSBcIi4uL2ltYWdlcy9hdmF0YXIuanBnXCI7XG5pbXBvcnQgcGVuY2lsSWNvbiBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC5zdmdcIjtcbmltcG9ydCBwbHVzSWNvbiBmcm9tIFwiLi4vaW1hZ2VzL3BsdXMuc3ZnXCI7XG5cbmNvbnN0IGF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF2YXRhclwiKTtcbmF2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyU3JjO1xuY29uc3QgbG9nb0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ29cIik7XG5sb2dvRWxlbWVudC5zcmMgPSBsb2dvU3JjO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlbmNpbC1pY29uXCIpLnNyYyA9IHBlbmNpbEljb247XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsdXMtaWNvblwiKS5zcmMgPSBwbHVzSWNvbjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZV9fcGVuY2lsLWxpZ2h0XCIpLnNyYyA9IHBlbmNpbExpZ2h0SWNvbjtcblxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjBmNjEzOGI1LThmYzktNGM2OC05MGI3LTRmZDY5MWNjZTM0NVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmFwaVxuICAuZ2V0QXBwSW5mbygpXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xuICAgIGF2YXRhckVsZW1lbnQuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xuICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcbiAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcblxuICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZCk7XG4gICAgICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbGVtZW50KTtcbiAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG4vLyBNb2RhbCBTZWxlY3Rpb25cbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENsb3NlQnV0dG9uID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25cIlxuKTtcblxuLy8gUHJvZmlsZSBlbGVtZW50c1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IGF2YXRhck1vZGFsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnRuXCIpO1xuXG4vLyBGb3JtIGVsZW1lbnRzXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBlZGl0Q2xvc2VCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IGVkaXRNb2RhbE5hbWVJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1uYW1lLWlucHV0XCJcbik7XG5jb25zdCBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5jb25zdCBlZGl0UHJvZmlsZVN1Ym1pdEJ0biA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIlxuKTtcblxuLy8gQXZhdGFyIGZvcm0gZWxlbWVudHNcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbW9kYWxcIik7XG5jb25zdCBhdmF0YXJGb3JtID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGF2YXRhclN1Ym1pdEJ0biA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XG5jb25zdCBhdmF0YXJNb2RhbENsb3NlQnRuID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuY29uc3QgYXZhdGFySW5wdXQgPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLWlucHV0XCIpO1xuXG4vLyBEZWxldGUgZm9ybSBlbGVtZW50c1xuY29uc3QgZGVsZXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKTtcbmNvbnN0IGRlbGV0ZUZvcm0gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgZGVsZXRlRm9ybUNsb3NlQnRuID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuY29uc3QgZGVsZXRlQ2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGUtY2FuY2VsLWJ0blwiKTtcblxuLy8gQ2FyZCBlbGVtZW50c1xuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRNb2RhbENsb3NlQnV0dG9uID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgYWRkQ2FyZFN1Ym1pdEJ0biA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZE5hbWVJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW5hbWUtaW5wdXRcIik7XG5jb25zdCBhZGRDYXJkTGlua0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmxldCBzZWxlY3RlZENhcmQsIHNlbGVjdGVkQ2FyZElkO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCBjYXJkTmFtZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgY2FyZE5hbWVFbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG5cbiAgY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBvcGVuTW9kYWwocHJldmlld01vZGFsKTtcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3TW9kYWxDYXB0aW9uRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIH0pO1xuXG4gIGlmIChkYXRhLmlzTGlrZWQpIHtcbiAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fbGlrZWRcIik7XG4gIH0gZWxzZSB7XG4gICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xuICB9XG5cbiAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBpc0xpa2VkID0gY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFxuICAgICAgXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiXG4gICAgKTtcblxuICAgIGFwaVxuICAgICAgLmNoYW5nZUxpa2VTdGF0dXMoZGF0YS5faWQsIGlzTGlrZWQpXG4gICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtcbiAgICAgICAgaWYgKHVwZGF0ZWRDYXJkLmlzTGlrZWQpIHtcbiAgICAgICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fbGlrZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9KTtcblxuICBjYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XG4gICAgc2VsZWN0ZWRDYXJkSWQgPSBkYXRhLl9pZDtcbiAgICBvcGVuTW9kYWwoZGVsZXRlTW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUsIFwiRGVsZXRlXCIsIFwiRGVsZXRpbmcuLi5cIik7XG5cbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgc2VsZWN0ZWRDYXJkLnJlbW92ZSgpO1xuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgZmFsc2UsIFwiRGVsZXRlXCIsIFwiRGVsZXRpbmcuLi5cIik7XG4gICAgfSk7XG59XG5cbmRlbGV0ZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVEZWxldGVTdWJtaXQpO1xuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlS2V5KTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0Rm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUsIFwiU2F2ZVwiLCBcIlNhdmluZy4uLlwiKTtcblxuICBhcGlcbiAgICAuZWRpdFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSxcbiAgICAgIGFib3V0OiBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlLFxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICAgIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKGVkaXRQcm9maWxlU3VibWl0QnRuLCBzZXR0aW5ncyk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgZmFsc2UsIFwiU2F2ZVwiLCBcIlNhdmluZy4uLlwiKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUsIFwiU2F2ZVwiLCBcIlNhdmluZy4uLlwiKTtcblxuICBjb25zdCBjYXJkRGF0YSA9IHtcbiAgICBuYW1lOiBhZGRDYXJkTmFtZUlucHV0LnZhbHVlLFxuICAgIGxpbms6IGFkZENhcmRMaW5rSW5wdXQudmFsdWUsXG4gIH07XG5cbiAgYXBpXG4gICAgLnBvc3ROZXdDYXJkKGNhcmREYXRhKVxuICAgIC50aGVuKChuZXdDYXJkKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KG5ld0NhcmQpO1xuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICAgICAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xuICAgICAgYWRkQ2FyZEZvcm1FbGVtZW50LnJlc2V0KCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKGFkZENhcmRTdWJtaXRCdG4sIHNldHRpbmdzKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCBmYWxzZSwgXCJTYXZlXCIsIFwiU2F2aW5nLi4uXCIpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlLCBcIlNhdmVcIiwgXCJTYXZpbmcuLi5cIik7XG5cbiAgYXBpXG4gICAgLmVkaXRBdmF0YXJJbmZvKGF2YXRhcklucHV0LnZhbHVlKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBhdmF0YXJFbGVtZW50LnNyYyA9IGRhdGEuYXZhdGFyO1xuICAgICAgY2xvc2VNb2RhbChhdmF0YXJNb2RhbCk7XG4gICAgICBhdmF0YXJGb3JtLnJlc2V0KCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKGF2YXRhclN1Ym1pdEJ0biwgc2V0dGluZ3MpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIGZhbHNlLCBcIlNhdmVcIiwgXCJTYXZpbmcuLi5cIik7XG4gICAgfSk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oXG4gICAgZWRpdEZvcm1FbGVtZW50LFxuICAgIFtlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LCBlZGl0TW9kYWxOYW1lSW5wdXRdLFxuICAgIHNldHRpbmdzXG4gICk7XG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5lZGl0Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5uZXdQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChjYXJkTW9kYWwpO1xufSk7XG5cbmNhcmRNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5wcmV2aWV3TW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKHByZXZpZXdNb2RhbCk7XG59KTtcblxuYXZhdGFyTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcbn0pO1xuYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhclN1Ym1pdCk7XG5cbmF2YXRhck1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChhdmF0YXJNb2RhbCk7XG59KTtcblxuZGVsZXRlRm9ybUNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpO1xufSk7XG5cbmRlbGV0ZUNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVPdmVybGF5Q2xpY2soZXZlbnQpIHtcbiAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgICBjbG9zZU1vZGFsKGV2ZW50LnRhcmdldCk7XG4gIH1cbn1cblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKS5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZU92ZXJsYXlDbGljayk7XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlS2V5KGV2ZW50KSB7XG4gIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgICBpZiAob3Blbk1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG9wZW5Nb2RhbCk7XG4gICAgfVxuICB9XG59XG5cbmVkaXRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRGb3JtU3VibWl0KTtcbmFkZENhcmRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBnZXRBcHBJbmZvKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIGVkaXRBdmF0YXJJbmZvKGF2YXRhcikge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICBwb3N0TmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlTGlrZVN0YXR1cyhpZCwgaXNMaWtlZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaW5wdXRFbCIsImNvbmZpZyIsImVycm9yTXNnSUQiLCJpZCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWwiLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiYWRkIiwic2V0QnV0dG9uVGV4dCIsImJ0biIsImlzTG9hZGluZyIsImRlZmF1bHRUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibG9hZGluZ1RleHQiLCJhdmF0YXJFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNyYyIsImF2YXRhclNyYyIsImxvZ29TcmMiLCJwZW5jaWxJY29uIiwicGx1c0ljb24iLCJwZW5jaWxMaWdodEljb24iLCJhcGkiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZ2V0QXBwSW5mbyIsIlByb21pc2UiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRBdmF0YXJJbmZvIiwiYXZhdGFyIiwicG9zdE5ld0NhcmQiLCJfcmVmMyIsImxpbmsiLCJkZWxldGVDYXJkIiwiY2hhbmdlTGlrZVN0YXR1cyIsImlzTGlrZWQiLCJhdXRob3JpemF0aW9uIiwidXNlckRhdGEiLCJjYXJkcyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZm9yRWFjaCIsImNhcmQiLCJjYXJkRWxlbWVudCIsImdldENhcmRFbGVtZW50IiwiY2FyZHNMaXN0IiwiYXBwZW5kIiwiY2F0Y2giLCJjb25zb2xlIiwiZXJyb3IiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxJbWFnZUVsIiwicHJldmlld01vZGFsQ2FwdGlvbkVsIiwicHJldmlld01vZGFsQ2xvc2VCdXR0b24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsIm5ld1Bvc3RCdXR0b24iLCJhdmF0YXJNb2RhbEJ0biIsImVkaXRQcm9maWxlTW9kYWwiLCJlZGl0Rm9ybUVsZW1lbnQiLCJlZGl0Q2xvc2VCdXR0b24iLCJlZGl0TW9kYWxOYW1lSW5wdXQiLCJlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0IiwiZWRpdFByb2ZpbGVTdWJtaXRCdG4iLCJhdmF0YXJNb2RhbCIsImF2YXRhckZvcm0iLCJhdmF0YXJTdWJtaXRCdG4iLCJhdmF0YXJNb2RhbENsb3NlQnRuIiwiYXZhdGFySW5wdXQiLCJkZWxldGVNb2RhbCIsImRlbGV0ZUZvcm0iLCJkZWxldGVGb3JtQ2xvc2VCdG4iLCJkZWxldGVDYW5jZWxCdXR0b24iLCJjYXJkTW9kYWwiLCJjYXJkTW9kYWxDbG9zZUJ1dHRvbiIsImFkZENhcmRGb3JtRWxlbWVudCIsImFkZENhcmRTdWJtaXRCdG4iLCJhZGRDYXJkTmFtZUlucHV0IiwiYWRkQ2FyZExpbmtJbnB1dCIsImNhcmRUZW1wbGF0ZSIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwiZGF0YSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkTmFtZUVsIiwiY2FyZEltYWdlRWwiLCJjYXJkTGlrZUJ1dHRvbiIsImNhcmREZWxldGVCdXR0b24iLCJhbHQiLCJhZGRFdmVudExpc3RlbmVyIiwib3Blbk1vZGFsIiwiY29udGFpbnMiLCJfaWQiLCJ1cGRhdGVkQ2FyZCIsIm1vZGFsIiwiaGFuZGxlRXNjYXBlS2V5IiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVPdmVybGF5Q2xpY2siLCJldmVudCIsInRhcmdldCIsImtleSIsImV2dCIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0QnRuIiwic3VibWl0dGVyIiwiZmluYWxseSIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwicmVzZXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FyZERhdGEiLCJuZXdDYXJkIiwicHJlcGVuZCIsIkFycmF5IiwiZnJvbSIsInNldEV2ZW50TGlzdGVuZXJzIiwiYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNc2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=